/* ============================================================
   AgroPan Forum — Styles
   ============================================================ */

/* ── Reset & Base ── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: var(--font-body);
  background: var(--color-bg);
  color: var(--color-text);
  line-height: var(--leading-normal);
  min-height: 100vh;
}

a { color: var(--color-primary); text-decoration: none; }
a:hover { text-decoration: underline; }

img { max-width: 100%; display: block; }

/* ── Buttons (shared) ── */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.6rem 1.25rem;
  border: none;
  border-radius: var(--radius-sm);
  font-family: var(--font-body);
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  cursor: pointer;
  transition: background var(--duration-fast) var(--ease-out),
              transform var(--duration-fast) var(--ease-out),
              box-shadow var(--duration-fast) var(--ease-out);
}
.btn:active { transform: scale(0.97); }
.btn--primary {
  background: var(--color-primary);
  color: #fff;
}
.btn--primary:hover { background: var(--color-primary-light); text-decoration: none; }
.btn--ghost {
  background: transparent;
  color: var(--color-text);
  border: 1px solid var(--color-border);
}
.btn--ghost:hover { background: rgba(0,0,0,0.04); text-decoration: none; }
.btn--sm { padding: 0.4rem 0.9rem; font-size: var(--text-xs); }
.btn--danger { background: var(--risk-high); color: #fff; }
.btn--danger:hover { background: #c0392b; }

/* ── Navbar ── */
.forum-nav {
  position: sticky;
  top: 0;
  z-index: var(--z-sticky);
  background: var(--color-primary-dark);
  color: #fff;
  box-shadow: var(--shadow-md);
}
.forum-nav__inner {
  max-width: var(--content-max);
  margin: 0 auto;
  padding: 0.75rem 1.5rem;
  display: flex;
  align-items: center;
  gap: 1rem;
}
.forum-nav__brand {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  color: #fff;
  font-family: var(--font-heading);
  font-size: var(--text-lg);
  font-weight: var(--weight-bold);
  text-decoration: none;
}
.forum-nav__brand img { border-radius: var(--radius-sm); }
.forum-nav__accent { color: #6EE7A8; }
.forum-nav__title {
  flex: 1;
  text-align: center;
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  color: rgba(255,255,255,0.7);
  letter-spacing: 0.02em;
}
.forum-nav__auth { display: flex; align-items: center; gap: 0.5rem; }
.forum-nav__auth .btn--primary {
  background: rgba(255,255,255,0.15);
  border: 1px solid rgba(255,255,255,0.3);
}
.forum-nav__auth .btn--primary:hover {
  background: rgba(255,255,255,0.25);
}
.forum-nav__user {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
}
.forum-nav__avatar {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--color-primary-light);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: var(--text-sm);
  font-weight: var(--weight-bold);
  color: #fff;
}

/* ── Main Content ── */
.forum-main {
  max-width: var(--content-max);
  margin: 0 auto;
  padding: 1.5rem;
}

/* ── Header ── */
.forum-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 1rem;
  margin-bottom: 1.25rem;
  flex-wrap: wrap;
}
.forum-header__title {
  font-family: var(--font-heading);
  font-size: var(--text-2xl);
  font-weight: var(--weight-bold);
  color: var(--color-text);
  line-height: var(--leading-tight);
}
.forum-header__sub {
  font-size: var(--text-sm);
  color: var(--color-text-muted);
  margin-top: 0.25rem;
}
.forum-header__right {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

/* ── Filter Tabs ── */
.forum-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--color-border-light);
}
.forum-filter {
  padding: 0.4rem 1rem;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-pill);
  background: var(--color-bg-card);
  color: var(--color-text-muted);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  cursor: pointer;
  transition: all var(--duration-fast) var(--ease-out);
}
.forum-filter:hover {
  border-color: var(--color-primary);
  color: var(--color-primary);
}
.forum-filter.active {
  background: var(--color-primary);
  color: #fff;
  border-color: var(--color-primary);
}

/* ── Login Prompt ── */
.forum-login-prompt {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: #EBF5FF;
  border: 1px solid #B3D4FC;
  border-radius: var(--radius-md);
  padding: 1rem 1.25rem;
  margin-bottom: 1.5rem;
  color: #1E3A5F;
}
.forum-login-prompt svg {
  flex-shrink: 0;
  stroke: #2E7D65;
}
.forum-login-prompt strong {
  font-size: var(--text-base);
  display: block;
  margin-bottom: 0.15rem;
}
.forum-login-prompt p {
  font-size: var(--text-sm);
  color: #4A6D8C;
  margin: 0;
}

/* ── Question Cards ── */
.forum-questions {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.q-card {
  background: var(--color-bg-card);
  border: 1px solid var(--color-border-light);
  border-radius: var(--radius-md);
  padding: 1.25rem;
  display: flex;
  gap: 1rem;
  transition: box-shadow var(--duration-fast) var(--ease-out),
              border-color var(--duration-fast) var(--ease-out);
  cursor: pointer;
}
.q-card:hover {
  box-shadow: var(--shadow-md);
  border-color: var(--color-border);
}

/* Vote column */
.q-card__votes {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.15rem;
  min-width: 48px;
  flex-shrink: 0;
}
.q-card__vote-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
  border-radius: var(--radius-sm);
  color: var(--color-text-light);
  transition: color var(--duration-fast), background var(--duration-fast);
  display: flex;
  align-items: center;
  justify-content: center;
}
.q-card__vote-btn:hover { background: rgba(0,0,0,0.05); }
.q-card__vote-btn.active-up { color: var(--color-primary); }
.q-card__vote-btn.active-down { color: var(--risk-high); }
.q-card__vote-btn.disabled {
  opacity: 0.35;
  cursor: default;
  pointer-events: none;
}
.q-card__score {
  font-size: var(--text-lg);
  font-weight: var(--weight-bold);
  color: var(--color-text);
  line-height: 1;
}

/* Content column */
.q-card__body {
  flex: 1;
  min-width: 0;
}
.q-card__question {
  font-size: var(--text-base);
  font-weight: var(--weight-semibold);
  color: var(--color-text);
  line-height: var(--leading-tight);
  margin-bottom: 0.5rem;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.q-card__meta {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.75rem;
  font-size: var(--text-xs);
  color: var(--color-text-muted);
}
.q-card__type {
  display: inline-block;
  padding: 0.15rem 0.6rem;
  border-radius: var(--radius-pill);
  font-size: 0.7rem;
  font-weight: var(--weight-semibold);
  text-transform: uppercase;
  letter-spacing: 0.04em;
}
.q-card__type--crop     { background: #E8F5E9; color: #2E7D32; }
.q-card__type--market   { background: #FFF8E1; color: #F57F17; }
.q-card__type--disease  { background: #FFEBEE; color: #C62828; }
.q-card__type--tech     { background: #E3F2FD; color: #1565C0; }
.q-card__type--general  { background: #F3E5F5; color: #6A1B9A; }
.q-card__answers-count {
  display: inline-flex;
  align-items: center;
  gap: 0.25rem;
}

/* ── Loading & Empty States ── */
.forum-loading {
  text-align: center;
  padding: 3rem 1rem;
  color: var(--color-text-muted);
}
.forum-spinner {
  width: 32px;
  height: 32px;
  border: 3px solid var(--color-border);
  border-top-color: var(--color-primary);
  border-radius: 50%;
  margin: 0 auto 1rem;
  animation: spin 0.7s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.forum-empty {
  text-align: center;
  padding: 4rem 1rem;
  color: var(--color-text-muted);
}
.forum-empty h3 {
  font-family: var(--font-heading);
  margin-top: 1rem;
  font-size: var(--text-lg);
  color: var(--color-text);
}
.forum-empty p {
  margin-top: 0.5rem;
  font-size: var(--text-sm);
}

/* ── Modal ── */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  z-index: var(--z-modal);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
  animation: fadeIn var(--duration-fast) var(--ease-out);
}
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.modal {
  background: var(--color-bg-card);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  width: 100%;
  max-width: 560px;
  max-height: 90vh;
  overflow-y: auto;
  animation: slideUp var(--duration-normal) var(--ease-out);
}
@keyframes slideUp {
  from { opacity: 0; transform: translateY(24px); }
  to   { opacity: 1; transform: translateY(0); }
}
.modal--wide { max-width: 720px; }
.modal__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.25rem 1.5rem;
  border-bottom: 1px solid var(--color-border-light);
}
.modal__header h2 {
  font-family: var(--font-heading);
  font-size: var(--text-lg);
  font-weight: var(--weight-bold);
}
.modal__close {
  background: none;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  color: var(--color-text-muted);
  padding: 4px 8px;
  border-radius: var(--radius-sm);
  transition: background var(--duration-fast);
  line-height: 1;
}
.modal__close:hover { background: rgba(0,0,0,0.06); }

.modal__form { padding: 1.5rem; }
.form-group { margin-bottom: 1.25rem; }
.form-group label {
  display: block;
  font-size: var(--text-sm);
  font-weight: var(--weight-semibold);
  margin-bottom: 0.4rem;
  color: var(--color-text);
}
.form-group select,
.form-group textarea,
.form-group input {
  width: 100%;
  padding: 0.65rem 0.85rem;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-family: var(--font-body);
  font-size: var(--text-sm);
  color: var(--color-text);
  background: var(--color-bg);
  transition: border-color var(--duration-fast);
}
.form-group select:focus,
.form-group textarea:focus,
.form-group input:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(46,125,101,0.12);
}
.form-group textarea { resize: vertical; min-height: 100px; }
.modal__actions {
  display: flex;
  justify-content: flex-end;
  gap: 0.75rem;
  padding: 0 1.5rem 1.5rem;
}

/* ── Detail Modal (Question + Answers) ── */
.detail-body { padding: 1.5rem; }

.detail-question {
  font-size: var(--text-base);
  line-height: var(--leading-normal);
  color: var(--color-text);
  margin-bottom: 0.75rem;
}
.detail-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  align-items: center;
  font-size: var(--text-xs);
  color: var(--color-text-muted);
  margin-bottom: 1rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--color-border-light);
}
.detail-vote-row {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1.25rem;
}
.detail-vote-btn {
  background: none;
  border: 1px solid var(--color-border);
  padding: 0.35rem 0.75rem;
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 0.3rem;
  font-size: var(--text-sm);
  color: var(--color-text-muted);
  transition: all var(--duration-fast);
}
.detail-vote-btn:hover { border-color: var(--color-primary); color: var(--color-primary); }
.detail-vote-btn.active-up { border-color: var(--color-primary); color: var(--color-primary); background: rgba(46,125,101,0.08); }
.detail-vote-btn.active-down { border-color: var(--risk-high); color: var(--risk-high); background: rgba(217,79,59,0.08); }
.detail-vote-btn.disabled { opacity: 0.35; pointer-events: none; }
.detail-score {
  font-weight: var(--weight-bold);
  font-size: var(--text-base);
  min-width: 24px;
  text-align: center;
}

/* Answers Section */
.answers-section { margin-top: 1.25rem; }
.answers-heading {
  font-family: var(--font-heading);
  font-size: var(--text-base);
  font-weight: var(--weight-semibold);
  margin-bottom: 0.75rem;
  color: var(--color-text);
}
.answer-card {
  background: var(--color-bg);
  border: 1px solid var(--color-border-light);
  border-radius: var(--radius-sm);
  padding: 1rem;
  margin-bottom: 0.6rem;
}
.answer-text {
  font-size: var(--text-sm);
  line-height: var(--leading-normal);
  color: var(--color-text);
  margin-bottom: 0.5rem;
}
.answer-meta {
  font-size: var(--text-xs);
  color: var(--color-text-muted);
}
.answer-vote-row {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  margin-top: 0.5rem;
}
.answer-vote-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 2px 6px;
  border-radius: var(--radius-sm);
  color: var(--color-text-light);
  font-size: var(--text-xs);
  display: inline-flex;
  align-items: center;
  gap: 0.2rem;
  transition: color var(--duration-fast), background var(--duration-fast);
}
.answer-vote-btn:hover { background: rgba(0,0,0,0.05); }
.answer-vote-btn.active-up { color: var(--color-primary); }
.answer-vote-btn.active-down { color: var(--risk-high); }
.answer-vote-btn.disabled { opacity: 0.35; pointer-events: none; }
.answer-score {
  font-size: var(--text-xs);
  font-weight: var(--weight-semibold);
  min-width: 16px;
  text-align: center;
}
.no-answers {
  text-align: center;
  font-size: var(--text-sm);
  color: var(--color-text-light);
  padding: 1.5rem 0;
}

/* Answer form */
.answer-form {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid var(--color-border-light);
}
.answer-form textarea {
  width: 100%;
  padding: 0.65rem 0.85rem;
  border: 1px solid var(--color-border);
  border-radius: var(--radius-sm);
  font-family: var(--font-body);
  font-size: var(--text-sm);
  color: var(--color-text);
  background: var(--color-bg-card);
  resize: vertical;
  min-height: 80px;
  transition: border-color var(--duration-fast);
}
.answer-form textarea:focus {
  outline: none;
  border-color: var(--color-primary);
  box-shadow: 0 0 0 3px rgba(46,125,101,0.12);
}
.answer-form__actions {
  display: flex;
  justify-content: flex-end;
  margin-top: 0.75rem;
}

/* ── Toast ── */
.toast {
  position: fixed;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%) translateY(100px);
  background: var(--color-bg-dark);
  color: #fff;
  padding: 0.75rem 1.5rem;
  border-radius: var(--radius-sm);
  font-size: var(--text-sm);
  font-weight: var(--weight-medium);
  box-shadow: var(--shadow-lg);
  z-index: 9999;
  opacity: 0;
  transition: all var(--duration-normal) var(--ease-out);
  pointer-events: none;
}
.toast.show {
  opacity: 1;
  transform: translateX(-50%) translateY(0);
}

/* ── Responsive ── */
@media (max-width: 640px) {
  .forum-nav__title { display: none; }
  .forum-header { flex-direction: column; gap: 0.5rem; }
  .forum-header__right { width: 100%; }
  .forum-header__right .btn { width: 100%; justify-content: center; }
  .q-card { flex-direction: column; gap: 0.75rem; }
  .q-card__votes { flex-direction: row; gap: 0.5rem; }
  .modal { max-height: 95vh; }
  .modal--wide { max-width: 100%; }
}
